# hh-hr-bot
# HR-аналитика вакансий hh.ru — курсовой проект

Этот проект посвящён анализу вакансий и навыков рынка труда с помощью Python и DuckDB на основе данных из открытого API hh.ru.  
В ходе работы формируется структурированная база данных по вакансиям и навыкам, проводится первичный анализ и создаётся основа для дальнейших ML/аналитических задач (включая Telegram-бота для HR).

## Старт проекта и подготовка окружения

В первые дни был организован удобный стек разработки:
- Создан и настроен репозиторий на GitHub, связанный с Google Colab и Google Drive для долговременного хранения всех файлов.
- Подготовлена структура проекта:
  - `src/etl/` — скрипты для сбора и обработки данных,
  - `data/raw/` — исходные выгрузки,
  - `data/` — база DuckDB,
  - `notebooks/` — ноутбуки для анализа.
- Сформирован `requirements.txt` с перечнем всех необходимых Python-библиотек для быстрой установки окружения:
 
 ## Быстрый старт

1. Перейти в папку проекта:
   ```python
   %cd /content/drive/MyDrive/hh-hr-bot
2. Установить зависимости:
 !pip install -r requirements.txt
3. Скачать свежие вакансии:
 !python src/etl/fetch_hh.py

## Структура данных
vacancy — основная таблица вакансий (id, название, описание, зарплата и др.)

skill — справочник уникальных навыков (name)

vacancy_skill — связи между вакансиями и навыками

## Очистка, нормализация зарплат и расширенный EDA

- Добавлен ноутбук `02_preprocessing.ipynb` для предобработки данных.
- Зарплаты всех вакансий нормализованы в рубли с помощью новой колонки `salary_rub`, что упростило последующий анализ.
- Проведён расширенный EDA: рассчитаны базовые статистики, построены графики распределения (boxplot, гистограмма), выявлены диапазоны и медианные значения зарплат.
- Все изменения и этапы зафиксированы в репозитории и оформлены в виде ноутбука и отчётных комментариев.

## Формирование новых признаков и расширенный анализ данных

- Создан и оформлен ноутбук `03_feature_engineering.ipynb` для автоматизированного формирования новых признаков на основе вакансий hh.ru.
- Реализовано выделение информативных признаков: длина описания, количество указанных навыков, длина названия, индикаторы уровня опыта.
- Проведён расширенный исследовательский анализ (EDA): изучено влияние количества навыков, длины описания и уровня опыта на медианную зарплату.
- Выявлены статистические закономерности, подтверждающие влияние характеристик вакансии на уровень оплаты труда.
- Подготовлен расширенный датасет для последующего применения моделей машинного обучения и аналитики рынка труда.

### Выводы по экспериментам с классификацией грейда вакансий

В ходе проекта были протестированы как базовые, так и продвинутые ML-модели для автоматической классификации грейда вакансий (junior, middle, senior, lead) на реальных данных.  
Рассматривались варианты: TF-IDF + LogisticRegression, MiniLM + RandomForest, LightGBM, CatBoost, дообучение Roberta.

Наиболее стабильные результаты показали:
- TF-IDF + LogisticRegression (accuracy ~0.57, f1 до 0.67 для “middle”)
- MiniLM + RandomForest/LightGBM/CatBoost с oversampling (accuracy ~0.50, f1 по двум основным классам > 0.45)

Попытки дообучить Roberta или использовать SMOTE не дали прироста качества из-за малого объёма данных и дисбаланса классов.

**Главный практический вывод:**  
Для реальных бизнес-задач “умные” эмбеддинги (MiniLM) + ансамбли или логистическая регрессия дают надёжный результат на ограниченных и дисбалансированных данных, если применить балансировку классов.

---

Дальнейшее улучшение качества возможно только при увеличении объёма данных или применении более продвинутых методов feature engineering.

Обученная модель RandomForest сохранена в grade_rf_model.joblib и может быть использована для инференса в Telegram-боте или FastAPI.


